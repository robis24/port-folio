<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <style media="screen">
      @import url('https://fonts.googleapis.com/css?family=Work+Sans:400,800');

      html, body {
        font-family: 'Work Sans', sans-serif;
        overflow-x: hidden;
        display:table;
        width:100%;
        padding:0;
        margin:0;
      }
      ul {
        margin:0;
        list-style: none;
      }
      a{
        cursor: pointer;
        text-decoration: none;
      }
      ul a:hover{
        color: gray;
        transform: skewX(30deg);
      }
      h1{
        text-transform: uppercase;
      }
      article{
         cursor: pointer;
      }
      article p{
        margin: 2em auto;
        max-width: 25em;
      }
      .post-image{
        width: 100%;
        height: 20em;
        background-size: cover;
      }

      .main{
        overflow: hidden;
        display: table;
      }
      .blackflip{
        color: white;
        z-index: -2000;
        position: fixed;
        width: 100%;
        height: 600%;
        background-color: black;

      }
      .frontflip{
        padding: 3em;
        background-color: white;
        position: relative;
        height: 100%;
        width:calc(100vw - 7em);
        transition: margin-left 2s cubic-bezier(0.29,-0.71, 0, 1.69), margin-top 2s cubic-bezier(0.29,-0.71, 0, 1.69);

      }
      .frontflip a{
        color: black;
      }
      .flip{
        margin-left: -100vw;

      }
      .flip .frontflip{
        margin-left: 100vw;

      }
      .flop{
        margin-top: 900px;
      }
      .flop .frontflip{
        margin-top: -900px;

      }
      .back{
        padding: 3em;
        width:calc(100vw - 7em);
        position: absolute;
        color: white;
      }
      .back a{
        color:white;
      }
      .back-wrapper{
        transition: margin-left 2s cubic-bezier(0.29,-0.71, 0, 1.69), margin-top 2s cubic-bezier(0.29,-0.71, 0, 1.69);
        overflow: hidden;
        width:calc(100vw - 1em);
      }

      .cms.post-cont {


      }


      .arrow{
        cursor: pointer;
        font-size: 1.2em;
        margin: 0 -0.5em;
        padding: 0.5em;
      }
      .dots{
        font-size: 2em;
    margin: 1em;

      }
      .dots span{
         padding: 0.3em;
      }
      .menu{
        transition: left 1s cubic-bezier(0.59, 0, 0, 1.04);
       width: 27em;
        overflow: hidden;
        z-index: 9999;
        position: fixed;
        top: 0;
        left:-27em;
        background: black;
        color:white;

        }
        .menu.open{
        left: 0px;

        }
        .menu nav{
          transition: margin-left 1s cubic-bezier(0.59, 0, 0, 1.04);
          width: 900px;

          margin-left: 27em;;
        }
        .menu ul{
            margin-top: 30vh;
            margin-bottom: 60vh;
        }
        .menu .fa-bars{
          margin:1.5em;
          padding: 0.5em;
          font-weight: 900;
          margin-left:1em;

        }
        .fa-bars{
          padding: 0.5em;
          font-weight: 900;
          margin-left: -0.5em;
          cursor: pointer;
          font-size: 2em
        }
        .fa-file-download{
          font-size: 5em;
          padding: 0.5em
        }
        .menu.open nav{
          margin-left: 0px;
        }
        .menu a{
          color:white;
        }
        .shome nav{
          position: relative;
          display: block;
          height: 5em;
        }
        .shome ul{
          position: absolute;
          right: 3em;

        }
        .shome p{
          margin: 2em auto;
          max-width: 25em;
        }
        .shome nav a{
          margin-left: -2em;100px
          display: block;
    font-size: 1.17em;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    font-weight: bold;
        }
 .intro{
       margin-top: -14em;
 }
 .unactive {
    max-height: 100vw;
    overflow: hidden;
}

      @media (max-width: 922px) {
        .intro{
              margin-top: 0em;
        }
        .cms.post-cont {
        }
        .post-image{
          margin-left: -3em;
          padding-right: 6em;
        }
      }
    </style>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  </head>
  <body>
    <div class="menu">
      <nav class="cms" data-cms="tags/menu">
        <i class="fas fa-bars"></i>

        <ul>
          <a href="#home">home</a>

        </ul>
      </nav>
    </div>
    <div class="main">
          <div class="back unactive">
            <i class="fas fa-bars"></i>

            <!-- <nav class="cms" data-cms="tags/menu">
              <ul>

              </ul>
            </nav> -->
            <div class="cms post-cont" data-cms="tags/posts">

            </div>
          </div>
      <div class="blackflip">
      </div>
      <div class="back-wrapper">
        <div class="frontflip">
          <i class="fas fa-bars"></i>

        <!-- <nav class="cms" data-cms="tags/menu">
          <ul>

          </ul>
        </nav> -->
        <div class="cms post-cont" data-cms="tags/posts">

          <section class="shome">
            &nbsp;
            <h1>robis koopmans</h1>
            <h3>designer</h3>
          <a href="https://raw.githubusercontent.com/robis24/port-folio/master/files/cv.pdf" download>
            <div>Download cv</div>
            <i class="fas fa-file-download"></i>
          </a>
          <div class="intro">
           <p>
             Graphic Designer with an intrest in social  bla bla
             stukje text om ff te testen hoe het staat . meer text meer text meer text
             Graphic Designer with an intrest in social  bla bla
             stukje text om ff te testen hoe het staat . meer text meer text meer text
           <p>
          </div>
            <nav>
              <ul>
              </ul>
            </nav>
          </section>
        </div>
        </div>
    </div>
    </div>
    <div class="homestor" style="display:none">

    </div>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>



  <script type="text/javascript">




$('.fa-bars').click(function(){
  if($('.back-wrapper').hasClass('flip')){
    $('.menu').attr('style','color:black;background:white;');
    $('.menu a').css('color','black');

  }else{
    $('.menu').attr('style','');
    $('.menu a').css('color','');

  }
  $('.menu').toggleClass('open');


   //$('.blackflip').css('transform', 'translateX(100vw)')
  })
//$(document).click(function () {
    //    !$(this).parent('article').length ?  $('article').removeClass('open-art') : $(this).addClass('open-art');
  //      });
// $(document).on('click', 'article', function(){
//   !$(this).hasClass('open-art') ? $('article').removeClass('open-art') && $(this).addClass('open-art'): $(this).removeClass('open-art');
//   $("html, body").animate({ scrollTop: 0 }, "slow");
//
//   })

var selected = [];
var endcount = 0;

$(document).on('click', '.back-arrow', function(){
  var cat = $(this).next().find('h3').text();
  var title = $(this).next().find('h1').text();
  console.log(endcount-2);
  fillItTwo(selected[endcount-2].title);

  $('.unactive article').attr('id',  "nr"+(endcount--));
  if( endcount === 1){
    $('.back-arrow').css('opacity', '0');
    $('.back-arrow').css('pointer-events', 'none');

  }
  $('.unactive .dots').append(selected.map(function(item) { return '<span>.</span>'  }));
  $('.unactive .dots span:nth-child('+endcount+')').css('color','red');
  $('.back').toggleClass('unactive');
  $('.frontflip').toggleClass('unactive');
  $('.back-wrapper').toggleClass('flip');

});

$(document).on('click', '.next-arrow', function(){
  var cat = $(this).next().find('h3').text();
  var title = $(this).next().find('h1').text();
  console.log(endcount);
  fillItTwo(selected[endcount].title);
  if((selected.length-1) === endcount){
    $('.next-arrow').hide();
  }
  $('.unactive article').attr('id',  "nr"+(endcount++));
  $('.unactive .dots').append(selected.map(function(item) { return '<span>.</span>'  }));
  $('.unactive .dots span:nth-child('+endcount+')').css('color','red');
  $('.back').toggleClass('unactive');
  $('.frontflip').toggleClass('unactive');
  $('.back-wrapper').toggleClass('flip');

});

$(document).on('click', 'article', function(){
  var link = $(this).find('h3').text();
  var link2 = $(this).find('h1').text();

  selected = [];
  var mc=0;
  posts.posts/*.filter(function(e){return e.cat === link;})*/.map(function(item) {

    if(item.cat === link){
      selected.push(item)
    }
  });
  var count = 0;
  selected.map(function(item) {
    count++
    if(item.title === link2){
      endcount = count;
    }
  });
  fillItTwo(link2);
  $('.unactive article').attr('id',  "nr"+endcount);
  //$('.unactive article').css('margin-top', (topx-119)+'px');
window.scrollTo(0, 0)
  if( endcount === 1){
    $('.back-arrow').css('opacity', '0');
    $('.back-arrow').css('pointer-events', 'none');

  }
  if((selected.length-1) === endcount){
    $('.next-arrow').hide();
  }
  $('.unactive .dots').append(selected.map(function(item) { return '<span>.</span>'  }));
  $('.unactive .dots span:nth-child('+endcount+')').css('color','red');
  $('.back').toggleClass('unactive');
  $('.frontflip').toggleClass('unactive');
  // $('.frontflip').css('transition','none');
  // $('.back-wrapper').css('transition','none');
  //$('.back-wrapper').toggleClass('flop');
  // setTimeout( function(){
  //   $('.frontflip').css('transition','');
  //   $('.back-wrapper').css('transition','');
  $('.back-wrapper').toggleClass('flip');
  //},3000)

});

$(document).on('click', '.menu nav a', function(){
  $('.menu').toggleClass('open');
  var etem = $(this);
  setTimeout(function(){
    var link = etem.attr('href');
    if(link === '#home'){
      $('.unactive .post-cont').html('')
      $('.unactive .post-cont').append('<section class="shome">'+$('.homestor').html()+'</section>');
      $('.shome nav ul').append(menuu);
    }else{
    fillIt(link);
    }
    $('.back').toggleClass('unactive');
    $('.frontflip').toggleClass('unactive');
    $('.back-wrapper').toggleClass('flip');

  },500)

  //  $('.back-wrapper').toggleClass('flip');
});

$(document).on('click', '.shome nav a', function(){
  var etem = $(this);
    var link = etem.attr('href');
    fillIt(link);
    $('.back').toggleClass('unactive');
    $('.frontflip').toggleClass('unactive');
    $('.back-wrapper').toggleClass('flip');

  //  $('.back-wrapper').toggleClass('flip');
});






var posts =[]


function fillIt(cato) {
  $('.unactive .post-cont').html('')
  posts.posts.map(function(item) {
    if(item.cat === cato.substring(1)){
      $('.unactive .post-cont').append('&nbsp;<article><h1>'+item.title+'</h1><h3>'+item.cat+'</h3><div class="post-image" style="background-image:url('+item.img+')"></div></article>')
    }
  });


}

function fillItTwo(id) {
  $('.unactive .post-cont').html('')
  posts.posts.map(function(item) {
    if(item.title === id){
      console.log(id);
      $('.unactive .post-cont').append('&nbsp;<span class="arrow back-arrow"><i class="fas fa-chevron-left"></i></span><span class="dots"></span><span class="arrow next-arrow"><i class="fas fa-chevron-right"></i></span><article><h1>'+item.title+'</h1><h3>'+item.cat+'</h3><div class="post-image" style="background-image:url('+item.img+')"></div><p>'+item.content+'</p></article><span class="arrow back-arrow"><i class="fas fa-chevron-left"></i></span><span class="dots"></span><span class="arrow next-arrow"><i class="fas fa-chevron-right"></i></span>')
    }
  });


}



$(document).ready(function() {

  $('.homestor').html($('.shome').html());


});

var menuu = '<br>';

function loading() {

//  $('.post-cont').append('&nbsp;<section class="shome"><h1>robis koopmans</h1><h3>designer</h3><div class="post-image" style="background-image:url()">Download cv</div><nav><ul>'+menuu+'</ul></nav></section>');


  $('.cms').each(function() {
    let prefix = 'https://raw.githubusercontent.com/robis24/port-folio/master/';
    var tagName = $(this).data('cms');
    var jsonUri =  prefix + tagName + '.json?cb=' + (new Date().getTime());
    var elem = $(this);
    $.ajax({url:jsonUri, dataType:'json'}).done(
      function(data) {
        console.log(data);
        if(tagName === 'tags/menu'){data.menu.map(function(item) {
          menuu = menuu.concat('<li><a href="#'+item+'">'+item+'</a></li>');
          elem.find('ul').append('<li><a href="#'+item+'">'+item+'</a></li>');
          $('.shome').find('ul').append('<li><a href="#'+item+'">'+item+'</a></li>');
        })}else{
          posts = data;



        //  data.posts.map(function(item) {

        //  elem.append('&nbsp;<article><h1>'+item.title+'</h1><h3>'+item.cat+'</h3><div class="post-image" style="background-image:url('+item.img+')"></div></article>')
        //})
      }




        // console.log(data.menu);
      }

    )
    .error( function(data) {
      console.log('eroor', data);
    })

  });
}
loading()

  </script>
</html>
